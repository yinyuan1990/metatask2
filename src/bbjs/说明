

1 ä½¿ç”¨åˆ›å»ºï¼Œå¯¼å…¥é’±åŒ…åã€‚éœ€è¦é»˜è®¤æ·»åŠ å¯¹åº”çš„æ‰‹ç»­è´¹èµ„äº§ã€‚

ä»¥ä¸‹æ˜¯ä½ ä¸¤ä¸ªç±» `AccountManager` 
å’Œ 
`AssetManager` çš„**åŠŸèƒ½è¯´æ˜ä¹¦**ä¸**å…¸å‹ä½¿ç”¨ä»£ç **ï¼Œ
ç”¨äºæ„å»ºä¸€ä¸ªæ”¯æŒå¤šé“¾çš„é’±åŒ…è´¦æˆ·ä¸èµ„äº§ç®¡ç†ç³»ç»Ÿã€‚

---

## ğŸ§  åŠŸèƒ½è¯´æ˜ä¹¦

### âœ… `AccountManager`ï¼šé’±åŒ…è´¦æˆ·ç®¡ç†å™¨

ç”¨äº**åˆ›å»ºã€å¯¼å…¥ã€åˆ‡æ¢å’Œåˆ é™¤é’±åŒ…è´¦æˆ·**ï¼Œæ”¯æŒåŠ©è®°è¯å’Œç§é’¥å¯¼å…¥ï¼Œå¹¶æ”¯æŒæ ¹æ®é“¾ ID è‡ªåŠ¨æ´¾ç”Ÿåœ°å€ã€‚

#### æ ¸å¿ƒåŠŸèƒ½ï¼š

| æ–¹æ³•                             | è¯´æ˜                           |
| ------------------------------ | ---------------------------- |
| `createFromMnemonic()`         | éšæœºç”ŸæˆåŠ©è®°è¯å¹¶åˆ›å»ºé’±åŒ…                 |
| `importMnemonic(mnemonic)`     | ä½¿ç”¨åŠ©è®°è¯å¯¼å…¥é’±åŒ…                    |
| `importPrivateKey(privateKey)` | ä½¿ç”¨ç§é’¥å¯¼å…¥é’±åŒ…                     |
| `switchAccount(walletId)`      | åˆ‡æ¢å½“å‰è´¦æˆ·                       |
| `switchToChain(chainId)`       | åˆ‡æ¢å½“å‰è´¦æˆ·ä½¿ç”¨çš„é“¾ï¼Œå¦‚æœæ— åœ°å€åˆ™è‡ªåŠ¨æ´¾ç”Ÿï¼ˆåŠ©è®°è¯è´¦æˆ·ï¼‰ |
| `getCurrentAccount()`          | è·å–å½“å‰è´¦æˆ·ä¿¡æ¯                     |
| `getCurrentAddress()`          | è·å–å½“å‰é“¾ä¸Šçš„åœ°å€                    |
| `getAllAccounts()`             | è·å–æ‰€æœ‰è´¦æˆ·ä¿¡æ¯                     |
| `deleteAccount(walletId)`      | åˆ é™¤æŸä¸ªè´¦æˆ·ï¼ˆè‡³å°‘ä¿ç•™ä¸€ä¸ªï¼‰               |

---

### âœ… `AssetManager`ï¼šèµ„äº§ç®¡ç†å™¨

ç”¨äº**ç®¡ç†æ¯ä¸ªè´¦æˆ·åœ°å€çš„é“¾ä¸Šèµ„äº§ä¿¡æ¯**ï¼ŒåŒ…æ‹¬é»˜è®¤ä¸»å¸ã€ä»£å¸æ·»åŠ ä¸ä»·æ ¼æ›´æ–°ã€‚

#### æ ¸å¿ƒåŠŸèƒ½ï¼š

| æ–¹æ³•                                                                   | è¯´æ˜                              |
| -------------------------------------------------------------------- | ------------------------------- |
| `getAssets(walletId, chainId)`                                       | è·å–æŒ‡å®šé’±åŒ…å’Œé“¾çš„æ‰€æœ‰èµ„äº§                   |
| `saveAssets(walletId, chainId, assets)`                              | ä¿å­˜èµ„äº§åˆ—è¡¨                          |
| `addAsset(walletId, chainId, asset)`                                 | æ·»åŠ ä¸€é¡¹èµ„äº§ï¼ˆé¿å…é‡å¤ï¼‰                    |
| `removeAsset(walletId, chainId, contractAddress)`                    | åˆ é™¤æŒ‡å®šåˆçº¦åœ°å€çš„èµ„äº§                     |
| `refreshAssets(walletId, chainId, address)`                          | æ›´æ–°èµ„äº§ä»·æ ¼ã€å›¾æ ‡ä¿¡æ¯                     |
| `addDefaultMainAsset(walletId, chainId, address)`                    | æ ¹æ® `chainId` æ·»åŠ é»˜è®¤ä¸»å¸èµ„äº§    åˆ›å»ºè´¦å·æˆ–å¯¼å…¥éœ€è¦è°ƒç”¨       |
| `addContractTokenAsset(walletId, chainId, address, contractAddress)` | æ·»åŠ æŒ‡å®šåˆçº¦åœ°å€ä»£å¸èµ„äº§ï¼ˆä½¿ç”¨ CoinGecko è·å–ä¿¡æ¯ï¼‰ |
| `addContractTokenAsset(walletId, chainId, address, contractAddress)  | æ·»åŠ ä¸€ä¸ªåˆçº¦ä»£å¸èµ„äº§  åˆ›å»ºè´¦å·æˆ–å¯¼å…¥éœ€è¦è°ƒç”¨


---

## ğŸ›  ä½¿ç”¨ç¤ºä¾‹

### ğŸ’¡ åˆ›å»ºæ–°é’±åŒ…è´¦æˆ·ï¼ˆåŠ©è®°è¯ï¼‰

```js
const account = accountManager.createFromMnemonic()
console.log('æ–°åŠ©è®°è¯:', account.mnemonic)
```

---

### ğŸ’¡ å¯¼å…¥ç§é’¥åˆ›å»ºè´¦æˆ·

```js
const account = accountManager.importPrivateKey('0xabc123...')
console.log('ç§é’¥å¯¼å…¥åœ°å€:', account.addresses[0].address)
```

---

### ğŸ’¡ è·å–å½“å‰è´¦æˆ·åœ°å€

```js
const current = accountManager.getCurrentAddress()
console.log('å½“å‰åœ°å€:', current.address)
```

---

### ğŸ’¡ åˆ‡æ¢è´¦æˆ· + åˆ‡æ¢é“¾

```js
accountManager.switchAccount('wallet-id-123')
const address = accountManager.switchToChain('137') // Polygon
console.log('Polygonåœ°å€:', address)
```

---

### ğŸ’¡ æ·»åŠ ä¸»å¸èµ„äº§ï¼ˆè‡ªåŠ¨è¯†åˆ«é“¾å‚æ•°ï¼‰

```js
const acc = accountManager.getCurrentAccount()
const addr = accountManager.getCurrentAddress()
await assetManager.addDefaultMainAsset(acc.walletId, addr.chainId, addr.address)
```

---

### ğŸ’¡ æ·»åŠ åˆçº¦ä»£å¸èµ„äº§ï¼ˆä¼šæŸ¥è¯¢ CoinGeckoï¼‰

```js
await assetManager.addContractTokenAsset(
  acc.walletId,
  addr.chainId,
  addr.address,
  '0x...tokenAddress'
)
```

---

### ğŸ’¡ è·å–å’Œåˆ·æ–°å½“å‰èµ„äº§

```js
const assets = assetManager.getAssets(acc.walletId, addr.chainId)
console.log('å½“å‰èµ„äº§åˆ—è¡¨:', assets)

await assetManager.refreshAssets(acc.walletId, addr.chainId, addr.address)
```

---

## ğŸ§© æ³¨æ„äº‹é¡¹
* æ‰€æœ‰æ•°æ®éƒ½é»˜è®¤ä¿å­˜åœ¨æµè§ˆå™¨ `localStorage`ï¼Œå¯æ›¿æ¢ä¸º Telegramã€IndexedDBã€åç«¯ APIã€‚
* ç›®å‰é»˜è®¤æ‰€æœ‰é“¾éƒ½ç”¨ `m/44'/60'/0'/0/0` æ´¾ç”Ÿè·¯å¾„ï¼Œå¦‚æœåç»­æ”¯æŒå…¶ä»–é“¾ï¼ˆå¦‚ BTCã€TRONï¼‰éœ€æ‰©å±•é€»è¾‘ã€‚
* åˆçº¦ä»£å¸ä»·æ ¼æ¥è‡ª CoinGeckoï¼Œä¸æ”¯æŒçš„é“¾éœ€æ‰‹åŠ¨è®¾ç½® fallback å€¼ã€‚
* æ‰€æœ‰èµ„äº§éƒ½åŒ…å«å­—æ®µï¼š`walletId`ã€`chainId`ã€`address`ã€`symbol`ã€`decimals`ã€`balance`ã€`priceUsd`ã€`iconUrl` ç­‰ã€‚


